{% extends "public/templates/navbar_templates.html" %}

{% block css %}<link rel="stylesheet" href="../../static/css/profile.css"> {% endblock %}

{% block title %}Home{% endblock %}

{% block content %}

<div class="container">
    <h1>Profile</h1>
    <hr>

    <div class="d-flex flex-column align-items-center gap-2">

        <button type="button" class="mt-1 mb-3" data-bs-toggle="modal" data-bs-target="#editProfileModal"
            style="border-radius: 10;">Edit profile</button>

        <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalLabel">Edit Profile</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <form action="/edit-profile" method="POST" enctype="multipart/form-data">
                            {% if data is none %}
                            <img src="https://i.ibb.co/zRyKTmf/pro.png" alt="Profile Pic" width="200" height="200" id="profileImage">
                            {% else %}
                            <img src="{{data.profile_image_url}}" alt="Profile Pic" width="200" height="200" id="profileImage">
                            {% endif %}

                            <input type="file" class="form-control mt-2" id="editPImage" name="editPImage"
                                required="true">

                            <div class="mt-3 mb-3">
                                <h6>Bio:</h6>
                                <div class="row mb-4">
                                    <textarea name="aboutme" id="aboutme" rows="5">{{data.aboutme}}</textarea>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-2">
                                        <p>Name:</p>
                                    </div>
                                    <div class="col-7">
                                        <input type="text" class="form-control" value="{{data.username}}"
                                            name="username" id="username" required="true">
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-2">
                                        <p>Height</p>
                                    </div>

                                    <div class="col-4">
                                        <input type="text" class="form-control" value="{{data.feet}}" name="feet"
                                            id="feet" required="true">
                                    </div>
                                    ft
                                    <div class="col-4">
                                        <input type="text" class="form-control" value="{{data.inches}}" name="inches"
                                            id="inches" required="true">
                                    </div>
                                    in
                                </div>
                                <div class="row mb-3">
                                    <div class="col-2">
                                        <p>Weight</p>
                                    </div>
                                    <div class="col-7">
                                        <input type="text" class="form-control" value="{{data.weight}}" name="weight"
                                            id="weight" required="true">
                                    </div>
                                    lbs
                                </div>
                                <div class="row">
                                    <div class="col-2">
                                        <p>Age</p>
                                    </div>
                                    <div class="col-7">
                                        <input type="text" class="form-control" value="{{data.age}}" name="age" id="age"
                                            required="true">
                                    </div>
                                    y.o.
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Save changes</button>
                            </div>
                        </form>
                    </div>


                </div>
            </div>
        </div>

        {% if data is none %}
        <img src="https://i.ibb.co/zRyKTmf/pro.png" alt="Profile Pic" width="200" height="200">

        <h4>About Me:</h4>
        <p style="text-align: center; width: 30%;"></p>

        <div class="mt-2 mb-3 gap-1">
            <p><b>Height:</b> none</p>
            <p><b>Weight:</b> none</p>
            <p><b>Age:</b> none</p>
        </div>

        {% else %}
        <img src="{{data.profile_image_url}}" alt="Profile Pic" width="200" height="200">

        <h3 class="mt-4">{{data.username}}</h3>
        <h4>About Me:</h4>

        <p style="text-align: center; width: 50%;">{{data.aboutme}}</p>

        <div class="mt-2 mb-3 gap-1">
            <p><b>Height:&emsp;</b>&emsp; {{data.feet}} ft {{data.inches}} in</p>
            <p><b>Weight:&emsp;</b>&emsp; {{data.weight}} lb</p>
            <p><b>Age: &emsp;</b>&emsp; {{data.age}} years old</p>
        </div>

        {% endif %}


        <a href=""><button type="button" class="btn btn-info">View Your Health Records</button></a>


    </div>
</div>
{% endblock %}